---
layout: post
title: NoGwari Deployment Error
description: >
sitemap: false
---

# NoGwari Deployment Error

---------------------

여태 시험기간이라서 블로그글 뿐 아니라 개인 프로젝트도 좀 뜸하게 올렸었다. 사실 학교에서 배우는 과목들이 너무 인공지능 위주라서 진짜 공부하기 싫었지만, 국가장학금은 받아야하니까 ㅎ... 2.5는 넘겨야하니까...ㅎ 공부를 했다. 선형대수학을 이미 버렸기 때문에 2.5 받으려면 다른거에서 잘 받아야한다고 생각해서 열심히 공부했는데, 평소보다 학점이 더 높게 나올수도 있을 거 같다 ㅋㅋㅋㅋ 선형대수학이 나에게 열정을 주었다. 선대수 제발 C+만 주세요.

아 뭔 일기를 쓰냐. 본론으로 들어가자면 시험공부가 끝난다음 ec2에 들어가보니 안 들어가진다. 어라? 싶어서 터미널에서 ubuntu를 실행하여 pem key를 이용하여 들어가보려 했는데 어라라? 또 안된다. 오류 메세지는 다음과 같았다

"Operation timed out"

아니 뭐 작업시간이 초과되었다고만 뜨고 다른건 하나도 안 뜨는거 보니 ec2에 오류메세지가 있겠거니 하였다. 근데 어라라라? 에러메세지도 별도로 찍히는게 없다. 그래서 여기저기 열심히 알아본 결과, 내가 언젠가 아래의 문구에서 y를 눌렀나보다.

```bash
Command may disrupt existing ssh connections. Proceed with operation (y|n)?
Firewall is active and enabled on system startup
```

좀 뭔지 읽어보고 하는데 (yes|no)라고 적혀있으면 그냥 생각도 안하고 yes해버린다. yes맨..

그래서 저 문구에 yes!한 이후 ec2 서버가 연결이 안되기 시작하였고, 시험기간이라서 확인 못하고 있다가 지금 확인한다. 그래서 velog에 있는 게시글을 참고하여 이 오류를 고쳤는데, 방법은 다음과 같다.

내가 찾은 오류는, 방화

1. 신규 인스턴스 시작
   그냥 처음 배포할때 만들었던것처럼 인스턴스를 새로운 것을 생성시켰다.

2. 기존 인스턴스 중지

3. 볼륨 메뉴로 가서 기존 인스턴스 볼륨을 끊고, 새 인스턴스에 연결

4. 새 인스턴스에 터미널에서 접속한 후, 볼륨을 마운트한 뒤 ufw설정을 바꿔줌

   ```bash
   mkdir mnt
   sudo mount /dev/xvdf1 ./mnt
   cd mnt/etc/ufw
   sudo vi ufw.conf
   ```

   ENABLED에 값을 no로 수정후 !wq

5. 마운트했던 볼륨을 다시 언마운트

   ```bash
   cd
   sudo umount ./mnt
   ```

6. 기존 인스턴스에 볼륨을 다시 연결

7. 접속!!!!!!!!!!!!!!!

접속이 완료되었다. 이게되네. 저 과정이 아마 볼륨을 새로 초기화해주면서 기본 방화벽 설정으로 돌아가는 거 같다. 근데 진짜 지금 나의 얄팍한 지식수준으론 완벽히 이해하진 못했는데, 저렇다고 가슴으로 이해했다.

여튼 뭐 ec2 살렸다면 오케이 아닐까요? 진짜 다행이다...
