<hr />

<p>아. 지금 일자는 6월 14일 글로 들어와있지만 지금 날짜는 7월 5일이다. swagger를 적용한 시기에 맞춰서 날짜를 설정했다. 그래서 기억이 잘 안나지만, 우여곡절했던 내용과 어떻게 설정했는지, 그리고 Swagger-auto-gen을 사용한 후기는 어땠는지, 설명해보려고 한다. 그래도 그때 여러 방법들에 대해 주석으로 각각 정리해두어서 글이라도 쓸 수 있게 됐다. 다행이다. 깃헙 예전 커밋들도 있으니까.. 확인해보며 썼다. 이러려고 형상관리하는게 맞나?</p>

<p>우선 3가지 방법으로 Swagger를 적용했었다.</p>

<ol>
  <li>Swagger.js 파일 생성해주어 간단히 옵션을 정해주고 끌어와서 쓰는 방법</li>
  <li>Swagger-auto-gen을 사용해 자동으로 swagger를 추가해주는 방법</li>
  <li>yamljs를 이용하여 swagger.yaml을 만들고, 그 파일을 끌어와서 쓰는 방법</li>
</ol>

<p>현재는 3번째 방법으로 사용하고 있다. swagger를 적용하는 과정 자체가 1 → 2 → 3이였고, 3번이 제일 좋다. 편하기도 하고 가독성도 해치지않는다.</p>

<p>각각 방법을 설명해보겠다.</p>

<h3 id="swaggerjs-파일-생성해주어-간단히-옵션을-정해주고-끌어와서-쓰는-방법">Swagger.js 파일 생성해주어 간단히 옵션을 정해주고 끌어와서 쓰는 방법</h3>

<p>여기서는 swagger.js파일이 중요한데 내용은 다음과 같다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">swaggerUi</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">swagger-ui-express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">swaggerJsdoc</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">swagger-jsdoc</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">config</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./config.js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">definition</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">openapi</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3.0.3</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">info</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nogwari</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">version</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
            <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nogwari swagger</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="na">components</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">securitySchemes</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">Authorization</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">scheme</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bearer</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">bearerFormat</span><span class="p">:</span> <span class="dl">"</span><span class="s2">JWT</span><span class="dl">"</span><span class="p">,</span>
                    <span class="na">value</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Bearer &lt;JWT token here&gt;</span><span class="dl">"</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">},</span>
        <span class="p">},</span>
        <span class="na">host</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">swagger</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span>
        <span class="na">basePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">apis</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">./router/*.js</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">specs</span> <span class="o">=</span> <span class="nf">swaggerJsdoc</span><span class="p">(</span><span class="nx">options</span><span class="p">);</span>
</code></pre></div></div>

<p>위와 같이 파일을 만들어주었다. 여기까진 순조롭고 너무 아름다웠다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app.js</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">specs</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./swagger.js</span><span class="dl">"</span><span class="p">;</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api-docs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nx">serve</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nf">setup</span><span class="p">(</span><span class="nx">swaggerDocument</span><span class="p">));</span>
</code></pre></div></div>

<p>app.js에서 이렇게 불러와주면 /api-docs를 실행시켰을때 swagger 창이 떴었다. 근데 이 친구에 고질적 문제는 이것이다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">express</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">express</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="dl">"</span><span class="s2">express-async-errors</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">boardController</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../controller/board_controller.js</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">express</span><span class="p">.</span><span class="nc">Router</span><span class="p">();</span>

<span class="c1">// GET /board?page=1&amp;list_num=5&amp;category=1</span>
<span class="cm">/**
 * @swagger
 * definitions:
 *   Board:
 *     properties:
 *       id:
 *         type: integer
 *       title:
 *         type: string
 *       content:
 *         type: string
 *       views:
 *         type: integer
 *       hits:
 *         type: integer
 *       dislikes:
 *         type: integer
 *       reported:
 *         type: integer
 *       createdAt:
 *         type: string
 *         format: date-time
 *       updatedAt:
 *         type: string
 *         format: date-time
 *       userId:
 *         type: integer
 *       categoryId:
 *         type: integer
 *       userNickname:
 *         type: string
 *       userImg:
 *         type: string
 *       userGrade:
 *         type: string
 *       categoryName:
 *         type: string
 */</span>

<span class="cm">/**
 * @swagger
 * paths:
 *  /board:
 *    get:
 *      summary: "전체 게시글 조회"
 *      parameters:
 *      - in: query
 *        name: page
 *        type: integer
 *        description: "page 번호 / defalut = 1"
 *      - in: query
 *        name: list_num
 *        type: integer
 *        description: "item 개수 / defalut = 5"
 *      - in: query
 *        name: category
 *        type: integer
 *        description: "category 번호 / 기입안할시 전체 게시글 검색"
 *      responses:
 *        "200":
 *          description: 게시글 조회 성공
 *          content:
 *            application/json:
 *              schema:
 *                $ref: '#/definitions/Board'
 */</span>

<span class="nx">router</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="nx">boardController</span><span class="p">.</span><span class="nx">getPostingByPage</span><span class="p">);</span>

<span class="c1">// GET /board/id</span>
<span class="cm">/**
 * @swagger
 * paths:
 *  /board/{id}:
 *    get:
 *      summary: "단일 게시글 조회"
 *      parameters:
 *        - in: path
 *          name: id
 *          required: true
 *          type: integer
 *          minimun: 1
 *          description: "게시글의 ID값으로 서칭"
 *      responses:
 *        "200":
 *          description: 게시글 조회 성공
 *          content:
 *            application/json:
 *              schema:
 *                $ref: '#/definitions/Board'
 *        "404":
 *          description: 해당 게시글 미존재
 */</span>
<span class="nx">router</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="dl">"</span><span class="s2">/:id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">boardController</span><span class="p">.</span><span class="nx">getPosting</span><span class="p">);</span>

<span class="c1">// POST /board</span>
<span class="cm">/**
 * @swagger
 * paths:
 *  /board:
 *    post:
 *      summary: "게시글 추가"
 *      consumes:
 *        - application/json
 *      parameters:
 *        - in: body
 *          name: board
 *          schema:
 *            type: object
 *            required:
 *              - title
 *              - content
 *              - userId
 *              - categoryId
 *            properties:
 *              title:
 *                type: string
 *              content:
 *                type: string
 *              hiddenNum:
 *                type: string
 *              userId:
 *                type: integer
 *              categoryId:
 *                type: integer
 *      responses:
 *        "201":
 *          description: 게시글 추가 성공
 *          content:
 *            application/json:
 *              schema:
 *                $ref: '#/definitions/Board'
 */</span>
<span class="nx">router</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span> <span class="nx">boardController</span><span class="p">.</span><span class="nx">newPosting</span><span class="p">);</span>

<span class="c1">// PUT /board/:id</span>
<span class="cm">/**
 * @swagger
 * paths:
 *  /board/{id}:
 *    put:
 *      summary: "게시글 수정"
 *      consumes:
 *        - application/json
 *      parameters:
 *        - in: path
 *          name: id
 *          required: true
 *          type: integer
 *          minimun: 1
 *          description: "게시글의 ID값으로 수정대상 찾기"
 *        - in: body
 *          name: board
 *          schema:
 *            type: object
 *            required:
 *              - title
 *              - content
 *              - categoryId
 *            properties:
 *              title:
 *                type: string
 *              content:
 *                type: string
 *              hiddenNum:
 *                type: string
 *              categoryId:
 *                type: integer
 *      responses:
 *        "200":
 *          description: 게시글 수정 성공
 *          content:
 *            application/json:
 *              schema:
 *                $ref: '#/definitions/Board'
 *        "404":
 *          description: 해당 게시글 미존재
 */</span>
<span class="nx">router</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="dl">"</span><span class="s2">/:id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">boardController</span><span class="p">.</span><span class="nx">updatePost</span><span class="p">);</span>

<span class="c1">// DELETE /board/:id</span>
<span class="cm">/**
 * @swagger
 * paths:
 *  /board/{id}:
 *    delete:
 *      summary: "단일 게시글 삭제"
 *      parameters:
 *        - in: path
 *          name: id
 *          required: true
 *          type: integer
 *          minimun: 1
 *          description: "게시글의 ID값으로 서칭"
 *      responses:
 *        "200":
 *          description: 게시글 조회 성공
 *          content:
 *            application/json:
 *              schema:
 *                $ref: '#/definitions/Board'
 *        "404":
 *          description: 해당 게시글 미존재
 */</span>
<span class="nx">router</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="dl">"</span><span class="s2">/:id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">boardController</span><span class="p">.</span><span class="nx">deletePost</span><span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">router</span><span class="p">;</span>
</code></pre></div></div>

<p>놀랍겠지만 라우터에 저런식으로 주석을 작성하여 swagger를 하나하나 추가해주었다. 뭐 api-docs에 들어가보면 하나하나 너무 색깔이 영롱해서 기분은 좋았지만, router의 기본은 이제 어떤 api가 있나 스윽스윽 볼 수 있는것도 중요하다고 생각한다. 이거 이대로 하면 1000줄은 가뿐히 넘어갈 거 같길래 이 방법은 여기서 포기하였다.</p>

<p>그래서 찾은 두번째 방법은 다음과 같다.</p>

<h3 id="swaggerjs-파일-생성해주어-간단히-옵션을-정해주고-끌어와서-쓰는-방법-1">Swagger.js 파일 생성해주어 간단히 옵션을 정해주고 끌어와서 쓰는 방법</h3>

<p>라이브러리를 찾아보니 저렇게 주석으로 해줄필요 없이 알아서 swagger를 생성해준다는 라이브러리가 있었다. 걔가 swagger-auto-gen이다. 근데 진짜 진심으로 이렇게 맛없는 라이브러리는 처음봤다. 정확히 동작구조는 router의 지점을 알려주면 거기서부터 api들을 찾아서 swagger.json을 만든 후, 그 json파일을 불러오면서 swagger가 생성되는 원리이다.</p>

<p>어.. 사진은 없긴한데 고질적인 문제점들을 찾아보자면</p>

<ol>
  <li>Api 호출하는 주소를 잘 못 찾는다. 예를들어 /auth/login과 /auth/signup이 있다고 가정하자. 근데 이 친구는 신기하게도 /auth/login은 기똥차게 가져왔는데, /auth/signup은 그냥 /signup으로 가져와버린다. 테스트? 당연히 안된다.</li>
  <li>태그 지정이 어렵다. json파일을 결국 본인 손으로 만져줘야 태그 지정이 가능하다.</li>
</ol>

<p>그냥 그런 느낌으로 생각하면 될 거 같다. 라이브러리가 다 해준다는 생각을 버리고, 대충 만들어준 라이브러리를 가지고 확인해보면서 json 파일을 수정해주는 것. 딱 그런 느낌이다.</p>

<p>설정하는 코드는 다음과 같다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// swagger.js</span>
<span class="k">import</span> <span class="nx">swaggerAutogen</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">swagger-autogen</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">doc</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">info</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">title</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nogwari</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">version</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.0</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">description</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nogwari swagger</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">host</span><span class="p">:</span> <span class="nx">config</span><span class="p">.</span><span class="nx">swagger</span><span class="p">.</span><span class="nx">host</span><span class="p">,</span>
    <span class="na">basePath</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">schemes</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">],</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">outputFile</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">./swagger-output.json</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">endpointsFiles</span> <span class="o">=</span> <span class="p">[</span><span class="dl">"</span><span class="s2">./router/auth_router.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">./router/board_router.js</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">./router/category_router.js</span><span class="dl">"</span><span class="p">];</span>

<span class="nf">swaggerAutogen</span><span class="p">(</span><span class="nx">outputFile</span><span class="p">,</span> <span class="nx">endpointsFiles</span><span class="p">,</span> <span class="nx">doc</span><span class="p">);</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//app.js</span>
<span class="k">import</span> <span class="nx">swaggerFile</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./swagger-output.json</span><span class="dl">"</span> <span class="nx">assert</span> <span class="p">{</span><span class="nl">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">json</span><span class="dl">"</span><span class="p">};</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api-docs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nx">serve</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nf">setup</span><span class="p">(</span><span class="nx">swaggerFile</span><span class="p">));</span>
</code></pre></div></div>

<p>그렇다. 걍 저렇게 불러와서 한다. 근데 맛 없는게 큰 단점이다. 그래서 마지막으로, 결국 현재까지도 채용해서 사용하고 있는 방법은</p>

<h3 id="yamljs를-이용하여-swaggeryaml을-만들고-그-파일을-끌어와서-쓰는-방법">yamljs를 이용하여 swagger.yaml을 만들고, 그 파일을 끌어와서 쓰는 방법</h3>

<p>사실 json 파일을 auth-gen된걸 수정해서 쓰나 이거나 그게 그거라고 생각하긴 한다. 근데 나는 auto-gen이 만든거 일일히 하나하나 읽으면서 이해한다음 수정할빠엔 내가 새로 만들자. 란 마인드가 강했다. 그래서 YAML파일을 사용하여 불러왔다.</p>

<p>근데 이 친구의 좋은점은 swagger.js파일을 따로 만들어주지 않아도, yaml파일 안에서 다 해결해낼 수 있다는 거였다. 그리고 설정하는 코드 마저도 cool 그 자체다. 아래는 코드이다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">YAML</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">yamljs</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">swaggerDocument</span> <span class="o">=</span> <span class="nx">YAML</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="dl">"</span><span class="s2">./swagger.yaml</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="dl">"</span><span class="s2">/api-docs</span><span class="dl">"</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nx">serve</span><span class="p">,</span> <span class="nx">swaggerUi</span><span class="p">.</span><span class="nf">setup</span><span class="p">(</span><span class="nx">swaggerDocument</span><span class="p">));</span>
</code></pre></div></div>

<p>진짜 세상에서 이렇게 쿨할 수 있을까?</p>

<p>그리고 1, 2번째 방법을 채택하지 않았던 큰 이유중 하나는, Swagger version자체가 OAS3여야 JWT토큰을 발급받는 과정을 test해볼 수 있다는 거였다. 이건 좀 긴가민가한 사실인데, 1,2번째 방법에서는 어떻게 해줘도 JWT토큰과, 그 토큰이 있을때만 허용해주는 api에 대해서 설정이 불가능했다. 그래서 좀 많이 헤매다 yamljs를 채택한 것이다.</p>

<p>간단하게 yaml파일을 어떻게 작성하였는지 아래와 같이 서술하겠다. 이건 일일이 설명하긴 굉장히 길기 때문에 코드보면서 읽는게 더 편할것이라 생각든다.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">openapi</span><span class="pi">:</span> <span class="s">3.0.0</span>
<span class="na">info</span><span class="pi">:</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s">Nogwari</span>
    <span class="na">version</span><span class="pi">:</span> <span class="s">1.0.0</span>
    <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Nogwari</span><span class="nv"> </span><span class="s">swagger"</span>
<span class="na">servers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">url</span><span class="pi">:</span> <span class="s">http://localhost:3000</span>
      <span class="na">description</span><span class="pi">:</span> <span class="s">Local development server</span>
<span class="na">paths</span><span class="pi">:</span>
    <span class="na">/board</span><span class="pi">:</span>
        <span class="na">get</span><span class="pi">:</span>
            <span class="na">summary</span><span class="pi">:</span> <span class="s2">"</span><span class="s">전체</span><span class="nv"> </span><span class="s">게시글</span><span class="nv"> </span><span class="s">조회"</span>
            <span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Board</span><span class="pi">]</span>
            <span class="na">parameters</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">query</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">page</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">page</span><span class="nv"> </span><span class="s">번호</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">defalut</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">1"</span>
                <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">query</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">list_num</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">item</span><span class="nv"> </span><span class="s">개수</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">defalut</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">5"</span>
                <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">query</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">category</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">category</span><span class="nv"> </span><span class="s">번호</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">기입안할시</span><span class="nv"> </span><span class="s">전체</span><span class="nv"> </span><span class="s">게시글</span><span class="nv"> </span><span class="s">검색"</span>
            <span class="na">responses</span><span class="pi">:</span>
                <span class="s2">"</span><span class="s">200"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">게시글 조회 성공</span>
                    <span class="na">content</span><span class="pi">:</span>
                        <span class="na">application/json</span><span class="pi">:</span>
                            <span class="na">schema</span><span class="pi">:</span>
                                <span class="na">$ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#/components/schemas/Board"</span>
        <span class="na">post</span><span class="pi">:</span>
            <span class="na">summary</span><span class="pi">:</span> <span class="s2">"</span><span class="s">게시글</span><span class="nv"> </span><span class="s">추가"</span>
            <span class="na">security</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">bearerAuth</span><span class="pi">:</span> <span class="pi">[]</span>
            <span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Board</span><span class="pi">]</span>
            <span class="na">requestBody</span><span class="pi">:</span>
                <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
                <span class="na">content</span><span class="pi">:</span>
                    <span class="na">application/json</span><span class="pi">:</span>
                        <span class="na">schema</span><span class="pi">:</span>
                            <span class="na">$ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#/components/schemas/Board"</span>
            <span class="na">responses</span><span class="pi">:</span>
                <span class="s2">"</span><span class="s">201"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">게시글 추가 성공</span>
                    <span class="na">content</span><span class="pi">:</span>
                        <span class="na">application/json</span><span class="pi">:</span>
                            <span class="na">schema</span><span class="pi">:</span>
                                <span class="na">$ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#/components/schemas/Board"</span>
            <span class="err">    </span><span class="s2">"</span><span class="s">401"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">인증 실패</span>
        <span class="na">delete</span><span class="pi">:</span>
            <span class="na">summary</span><span class="pi">:</span> <span class="s2">"</span><span class="s">단일</span><span class="nv"> </span><span class="s">게시글</span><span class="nv"> </span><span class="s">삭제"</span>
            <span class="na">security</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">bearerAuth</span><span class="pi">:</span> <span class="pi">[]</span>
            <span class="na">tags</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">Board</span><span class="pi">]</span>
            <span class="na">parameters</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="na">in</span><span class="pi">:</span> <span class="s">path</span>
                  <span class="na">name</span><span class="pi">:</span> <span class="s">id</span>
                  <span class="na">required</span><span class="pi">:</span> <span class="kc">true</span>
                  <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                  <span class="na">minimun</span><span class="pi">:</span> <span class="m">1</span>
                  <span class="na">description</span><span class="pi">:</span> <span class="s2">"</span><span class="s">게시글의</span><span class="nv"> </span><span class="s">ID값으로</span><span class="nv"> </span><span class="s">서칭"</span>
            <span class="na">responses</span><span class="pi">:</span>
                <span class="s2">"</span><span class="s">204"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">게시글 삭제 성공</span>
                    <span class="na">content</span><span class="pi">:</span>
                        <span class="na">application/json</span><span class="pi">:</span>
                            <span class="na">schema</span><span class="pi">:</span>
                                <span class="na">$ref</span><span class="pi">:</span> <span class="s2">"</span><span class="s">#/components/schemas/Board"</span>
            <span class="err">    </span><span class="s2">"</span><span class="s">401"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">인증 실패</span>
                <span class="s2">"</span><span class="s">403"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">삭제 권한 없음</span>
                <span class="s2">"</span><span class="s">404"</span><span class="err">:</span>
                    <span class="na">description</span><span class="pi">:</span> <span class="s">해당 게시글 미존재</span>
<span class="na">components</span><span class="pi">:</span>
    <span class="na">schemas</span><span class="pi">:</span>
        <span class="na">Board</span><span class="pi">:</span>
            <span class="na">required</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">id</span>
                <span class="pi">-</span> <span class="s">title</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">title</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">content</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">views</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">hits</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">dislikes</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">reported</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">createdAt</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">date-time</span>
                <span class="na">updatedAt</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">date-time</span>
                <span class="na">userId</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">categoryId</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">userNickname</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">userImg</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">userGrade</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">categoryName</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">Auth</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">token</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">realid</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">Category</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">id</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
                <span class="na">name</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">post_num</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int64</span>
        <span class="na">PostCategory</span><span class="pi">:</span>
            <span class="na">propertirs</span><span class="pi">:</span>
                <span class="na">name</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">Signup</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">required</span><span class="pi">:</span>
                    <span class="pi">-</span> <span class="s">realid</span>
                    <span class="pi">-</span> <span class="s">password</span>
                    <span class="pi">-</span> <span class="s">nickname</span>
                    <span class="pi">-</span> <span class="s">email</span>
                <span class="na">realid</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">password</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">nickname</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">email</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">img</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">Login</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">realid</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
                <span class="na">password</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
        <span class="na">Error</span><span class="pi">:</span>
            <span class="na">properties</span><span class="pi">:</span>
                <span class="na">code</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">integer</span>
                    <span class="na">format</span><span class="pi">:</span> <span class="s">int32</span>
                <span class="na">message</span><span class="pi">:</span>
                    <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
    <span class="na">securitySchemes</span><span class="pi">:</span>
        <span class="na">bearerAuth</span><span class="pi">:</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s">http</span>
            <span class="na">scheme</span><span class="pi">:</span> <span class="s">bearer</span>
            <span class="na">bearerFormat</span><span class="pi">:</span> <span class="s">JWT</span>
</code></pre></div></div>

<p>좀 기네? 간단한 CRUD들과 tag기능을 하는 components, 그리고 JWT를 확인할 수 있는 securitySchemes에 대하여 이렇게 구현하였다. 이렇게 한번 구현해두면 나중에 복붙해서 새로운 api를 적용하는것도 어렵지 않았다.</p>

<p>FE는 진짜 학교에서 찍먹으로 배워본 거 말고는 배워본적이 없는데, swagger하다보니 색깔도 알록달록 이뻐서 하나하나 적용하는게 너무 재밌었던 거 같다. Swagger api 색깔 만든 사람 진짜 상줘야할 거 같다. 야무지다.</p>

<p><img src="/assets/img/Project/nogwari/swagger.png" alt="" /></p>
